#############################################################
# This is a linux cheat sheet for beginner to advanced users. 
#############################################################

####### Linux Cheat Sheet #######



### File Commands and Basics ###
ls					# directory listing
	ls -al				# formatted listing with hidden files
	ls -ltra			# sorts by last updated with hidden files
	ls -Sharl			# sorts by file size with hidden files
	ls -m				# shows files and directories comma separated
	ls --full-time			# formatted listing with year
	ls -R				# list files and subdirectories recursively
cd dir					# change directory to dir
	cd				# change to home directory
pwd					# show current directory 
mkdir dir				# create a directory dir
	mkdir -p ./parentdir/childdir/	# creates parentdir as well as childdir
rmdir					# remove an empty directory
rm file					# delete file
	rm -r dir			# delete directory dir
	rm -f file			# force remove file
	rm -rf dir			# force remove directory dir
	rm -i file			# asks before file is deleted 
cp file1 file2				# copy file1 to file2
	cp -r dir1 dir2			# copy dir1 to dir2; create dir2 if it doesn't exist
	cp -a dir1 dir2			# copies entire directory tree
	cp -u dir1 dir2			# prevents overwriting identically-named newer files
mv file1 file2  			# rename or move file1 to file2
ln -s TARGET LINK_NAME			# create symbolic link link to TARGET
	ln TARGET LINK_NAME		# hard link, points to inode instead of filename
touch file				# create or update file
	touch -d "two hours ago" filename	# change the modified time of file
stat -c %Y test | gawk '{print strftime("%c", $0)}'	# output of this and below command will be the same if file's mod time wasn't touched
stat -c %Z test | gawk '{print strftime("%c", $0)}'	# output of this will show when the file was last touched or modified
cat > file				# places standard input into file
head file				# output the first 10 lines of file
	head -n 3 file			# output the first 3 lines of file
tail file				# output the last 10 lines of file
	tail -f file			# output the contents of file as it grows, starting with the last 10 lines
	tail -n 3 file			# output the last 3 lines of file
wc					# 
	echo -n string | wc -m		# counts the characters in a string
xargs					#
	find . -name "*.c" | xargs rm -rf	# remove all files ending in .c
	find . -name '*.c' | xargs grep 'stdlib.h'	# find files whose name ends in .c and stdlib.h is in the file
cat file				# prints a file to standard out
	cat score.txt names.txt > report.txt	# concatenates two files into one.
tac file				# prints a file to standard out in reverse order
rev file				# prints the characters in a line in reverse order
echo text				# prints to standard out
more file				# primitive version of less, use less
less file				# scrolls through a file
man command				# view the linux manual for the specified command 
	man man				# useful for looking at manual sections ( e.g. ls(1) )
	man -S 1 ls			# view the man page, section 1, of ls
info					#
	info ls				# some mor info on the ls command 
ls | tee file 				# read from standard input and write to standard output and files
	ls | tee -a file		# read from standard input and write to standard output and append to files
file FILE				# displays the file type



### Miscellaneous Commands ###
clear					# clears output of the terminal
vimtutor				# 
apropos					# 



### Administrative Commands ###
sudo command				# run a command as root 
sudo -s					# run the shell specified by the SHELL environment variable
sudo -i					# 
visudo					# 
exit					# 
<a href="https://prasadlinuxblog.wordpress.com/2012/09/04/392/" target="_blank">su vs sudo vs runuser</a>	# su vs sudo vs runuser



### Command Line Operators ### 
STDIN (0) - Standard input (data fed into the program)
STDOUT (1) - Standard output (data printed by the program, defaults to the terminal)
STDERR (2) - Standard error (for error messages, also defaults to the terminal)
>
>>
<
2>
|
&amp;
~
*
;
/
&amp;&amp;
||
&amp;&amp; and ||
!
!!
`` (backticks)
for in do
	
	
	
### User Management ###
sudo useradd USERNAME
/etc/passwd
account:password:UID:GID:GECOS:directory:shell
/etc/shadow
/etc/group
/etc/gshadow
/etc/sudoers
useradd -G GROUPNAME USERNAME
useradd -m -g INITIALGROUP -G ADDITIONALGROUPS -s LOGINSHELL USERNAME
passwd, passwd USER
chfn
chage
userdel -r
groups USERNAME
id USERNAME
groupadd GROUP
gpasswd -a USER GROUP
groupdel GROUP
groupmod -n NEWGROUP OLDGROUP
gpasswd -d USER GROUP



### Process Management ###
ps  display your currently active processes
ps auwx  
ps axf  lists processes in a tree view
ps axf | grep raid 
top  display all running processes
kill pid  kill process id pid
killall proc  kill all processes named proc *
Control + c  halts the current command
Control + d  log out of current session, similar to exit
Control + s, Control + q  stops output, resumes output
Control + z  stops the current command, resume with fg in the foreground or bg in the background
bg  lists stopped or background jobs; resume a stopped job in the background
fg  brings the most recent job to foreground
COMMAND &amp; runs command in the background
fg n%  brings job n to the foreground
kill n%  kills job n
jobs  lists jobs
sudo update-rc.d -f process remove
sudo chkconfig apache2 off
pgrep
pstree
sudo



### Permissions ###
chmod octal file  change the permissions of file to octal, which can be found separately for user, group, and world.
	chmod 777 file read, write, execute for all
	chmod 755 file rwx for owner, rx for group and world
stat -c %U /media/sf_Shared/
stat -c %G /media/sf_Shared/
stat -c %A /media/sf_Shared/
find / -group [group]
find / -user [user]
chown --preserve-root
	chown --preserve-root user:group -R /home/user/* chowns all files except hidden files
	<strike>chown --preserve-root user:group -R /home/user/.*</strike> DO NOT DO THIS (This command will start chowning .. directories)
	chown --preserve-root user:group -R /home/user/.[^.]* chowns all hidden files
	chown --preserve-root user:group -R /home/user chowns all files in user but also chows the directory user



### SSH ### 
ssh user@host  connect to host as user
ssh -p port user@host  connect to host on port
ssh-copy-id user@host  add your key to host for user to enable a keyed or passwordless login



### Searching ###
grep pattern files  search for pattern in files
grep -r pattern dir  search recursively for pattern in dir
grep -B 1 pattern dir search for pattern and print line as well as one line before 
grep -A 1 pattern dir search for pattern and print line as well as one line after
command | grep pattern  search for pattern in the output of command
locate file  find all instances of file
sudo updatedb  updates the database that locate uses to search for files.
find
find -maxdepth 1 -type f -mtime +60 -exec ls -l {} \;



### Shells ###
sh
bash
dash
csh
tcsh



### Disk Usage ###
df  show disk usage
	df -ih
	df -h
find / -xdev -printf '%h\n' | sort | uniq -c | sort -k 1 -n
du  show directory space usage
	du -sch *
	du -sch .[!.]* * |sort -h



### File Comparison ###
diff -u file1 file2 > file3



### IP Addresses ###
ifconfig
ip addr show | perl -ne '/inet\s*([\d\.]+).*global/ &amp;&amp; do {print "$1\n"}'
	ip addr | grep inet
curl ifconfig.me
http://vlsm-calc.net/ipclasses.php IP Address Classes (Replaced by http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing >CIDR)
http://en.wikipedia.org/wiki/Reserved_IP_addresses Reserved IP Addresses
http://www.subnet-calculator.com/subnet.php IP Subnet Calculator
http://www.subnet-calculator.com/cidr.php CIDR Calculator



### System Info ###
date  show the current date and time
cal  show this month's calendar
uptime  show current uptime
w  display who is online
whoami  who you are logged in as
finger user  display information about user
uname -a  show kernel information
cat /proc/cpuinfo  cpu information
	cat /proc/meminfo  memory information
	cat /proc/version  version information
cat /etc/*-release  distribution and version (no such file in Debian)
lsb_release -a  distribution and version
cat /etc/issue  distribution and version
man command  show the manual for command
free  show memory and swap usage
whereis app  show possible locations of app
which app  show which app will be run by default
ls -l /usr/share/xsessions  show desktop environments



### Compression ###
tar cf file.tar files  create a tar named file.tar containing files
tar xf file.tar  extract the files from file.tar
tar czf file.tar.gz files  create a tar with Gzip compression
tar xzf file.tar.gz  extract a tar using Gzip
tar cjf file.tar.bz2  create a tar with Bzip2 compression
tar xjf file.tar.bz2  extract a tar using Bzip2
gzip file  compresses file and renames it to file.gz
gzip -d file.gz  decompresses file.gz back to file
bunzip2



### Network ###
ping host  ping host and output results
fping
whois domain  get whois information for domain
dig domain dig mx domain get DNS information for domain
dig -x host  reverse lookup host
wget file  download file
wget -c file  continue a stopped download
host
nslookup
nmap
traceroute
netstat -nat | grep LISTEN



### Packaging Commands ###
rpm -qa --last | less
sudo apt-get update
sudo apt-get upgrade
sudo apt-get autoremove
sudo apt-get autoclean
Install form source: ./configure -&gt; make -&gt; make install
dpkg -i pkg.deb  install a package (Debian)
dpkg -l | grep PACKAGE  see if a package is installed (Debian)
dpkg -s PACKAGE  see if package is installed and get info (Debian)
dpkg-query -L PACKAGE  view the files that are associated in the bash package
rpm -Uvh pkg.rpm  install a package (RPM)
rpm -qa | grep PACKAGE  see if a package is installed (RPM)
rpm -ql PACKAGE  view the files that are associated in the bash package (RPM)
	Remove Kernels In /boot (Debian)
		df -h
		uname -r
		dpkg -l | grep linux-image
		dpkg -r linux-image-3.2.0-65-generic
		dpkg --purge linux-image-3.2.0-65-generic
		df -h
lsmod
modprobe



### gpg ###
gpg --gen-key
gpg --list-keys
gpg --list-secret-keys
gpg --keyserver pgp.mit.edu --search-keys user@example.com
https://kb.iu.edu/d/awiu
https://pgp.mit.edu/
https://futureboy.us/pgp.html
https://www.gnupg.org/index.html
https://www.digitalocean.com/community/tutorials/how-to-use-gpg-to-encrypt-and-sign-messages-on-an-ubuntu-12-04-vps
http://www.thegeekstuff.com/2012/10/gnupg-basics/



### Logs ###
/var/log/
/etc/cron.daily/logrotate
/etc/logrotate.conf
/etc/logrotate.d/
logrotate -d /etc/logrotate.conf
logrotate -f /etc/logrotate.conf



### Cron ### 
/etc/crontab
/etc/cron.hourly/, /etc/cron.daily/, /etc/cron.weekly/, /etc/cron.monthly/
/etc/cron.d/
/var/spool/cron/crontabs/



### Backups ### 
rsync -havPn $FILE root@$HOSTNAME:/$RESTORE-DIR
	ZFS - http://en.wikipedia.org/wiki/ZFS
		zfs create pool/dataset
		zfs create -o OPTION=OPTIONVALUE pool/dataset
		zfs list
		zfs destroy
		zfs umount
		zfs rename
		zfs mount
		zpool status
		zpool history
		zfs get all pool/dataset
		Oracle ZFS Docs - http://docs.oracle.com/cd/E18752_01/html/819-5461/zfsover-1.html



### psql ###
psql -d DATABASE
\l
\dt
\q
\d+ backups



### iptables / Rate Limiting ###
iptables -L -v
iptables -L -vt nat
iptables-save | less
iptables -L --line-numbers
fail2ban - http://www.fail2ban.org/
/var/log/secure fail2ban scans this file for multiple login attempts
/etc/fail2ban/
denyhosts



### Mail Servers ###
http://en.wikipedia.org/wiki/Comparison_of_mail_servers >Comparison Of Mail Servers
Postfix Commands
	postqueue -p
	postcat -q MSGID | cat
	postcat MSGID
	http://www.greylisting.org/ >greylisting.org
	http://forum.centos-webpanel.com/e-mail/postfix-mail-server-commands/ >http://forum.centos-webpanel.com/e-mail/postfix-mail-server-commands/



### Editors ###
vi,vim
vi -r .file.swp
nano
emacs
pico
gvim
gedit
geany



### RAID ###

http://en.wikipedia.org/wiki/Standard_RAID_levels Standard RAID Levels
http://en.wikipedia.org/wiki/Nested_RAID_levels Nested RAID Levels
/proc/mdstat
mdadm - assemble, build, create, monitor, grow, manage, and misc



### SSL ###
/etc/ssl/
/etc/httpd/conf.d/
https://www.sslshopper.com/ssl-checker.html >SSL Checker
SSL Generation
	openssl req -out CSR.csr -sha256 -new -newkey rsa:2048 -nodes -keyout privateKey.key  Generate a new private key and Certificate Signing Request
	openssl req -x509 -nodes -sha256 -days 365 -newkey rsa:2048 -keyout privateKey.key -out certificate.crt  Generate a self-signed
certificate
	openssl req -out CSR.csr -sha256 -key privateKey.key -new  Generate a certificate signing request (CSR) for an existing private
key
	penssl x509 -x509toreq -sha256 -in certificate.crt -out CSR.csr -signkey privateKey.key  Generate a certificate signing request based on an
existing certificate
	penssl rsa -in privateKey.pem -out new  PrivateKey.pem Remove a passphrase from a private key
<strong>SSL Checking</strong>
	openssl req -text -noout -verify -in CSR.csr  Check a Certificate Signing Request (CSR)
	openssl rsa -in privateKey.key -check  Check a private key
	openssl x509 -in certificate.crt -text -noout  Check a certificate
	openssl pkcs12 -info -in keyStore.p12  Check a PKCS#12 file (.pfx or .p12)
Wildcard vs. SAN Certificate
Domain Validated vs. Business Validated



### System Discovery ###
xinput, xinput disable
lsmod
lspci
netstat -pnatu



### System Migration/Comparison ###
rpm -qa | sort &gt; packages



### SVN ###
svn log | head -n 30
svn diff -r r12345:r12346
http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.status.html



### http://en.wikipedia.org/wiki/Lists_of_network_protocols Protocols ###
http://en.wikipedia.org/wiki/Simple_Network_Management_Protocol >SNMP
http://en.wikipedia.org/wiki/List_of_HTTP_status_codes >HTTP Error Codes



### File Systems ###
http://en.wikipedia.org/wiki/Comparison_of_file_systems >Comparison
http://en.wikipedia.org/wiki/List_of_file_systems >List of File Systems
df -T
http://en.wikipedia.org/wiki/Network_File_System >NFS
http://en.wikipedia.org/wiki/ZFS >ZFS



### FTP ###



### Math ###
echo $(( ... ))



### Programming ###
bash
python
perl
C,C++
Java
php




### Processes ###
postfix, /usr/libexec/postfix/master, /etc/postfix/main.cf, /etc/postfix/virtual
cyrus, /etc/sasl2/smtpd.conf, /etc/imapd.conf



### Shell Variables ###
$0, $1, $2, $3... - positional parameters
${10} ... ${N} - positional parameters beyond 9
$* - $1 $2 $3 ... ${N}
$@ - $1 $2 $3 ... ${N}
"$*" - "$1c$2c$3c...c${N}"
"$@" - "$1" "$2" "$3" ... "${N}"
$# - total number of parameters



### Languages ###
Perl
CPAN



### VPN ###



### Proxy ###



### End Of Life ###
http://wiki.centos.org/FAQ/General#head-fe8a0be91ee3e7dea812e8694491e1dde5b75e6d Centos
http://en.wikipedia.org/wiki/Fedora_(operating_system)#Releases Fedora
http://en.wikipedia.org/wiki/Red_Hat_Enterprise_Linux#Product_life_cycle Red Hat



### TODO ###
mount, umount 
dd
parted 
mkfs 
sudo !! 
sudo command 
openssl rsa -in users.tummy.com.key -pubout 
xinput, xinput disable NUMBER
lsblk
fdisk -l
drbd
heartbeat
dd
df, df -a, df -h
uname, uname -a
history
cut
sudo
apt, apt-get, apt-cache
touch
md5sum
tar
screen
cal, cal 09 1987
date, date --set='19 september 2015 12:00
cat, cat a b ab
wc, wc -l


